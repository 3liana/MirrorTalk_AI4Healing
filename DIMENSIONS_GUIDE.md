# 维度可视化与像素画功能说明

## ✨ 新增功能

### 1. **8维度特质可视化**
展示用户在8个心理维度上的特质：

| 维度 | 视觉隐喻 | 含义 |
|------|---------|------|
| 主体感来源 | 光源位置 | 主体感来自关系 ↔ 来自内在 |
| 归因方向 | 漩涡方向 | 向内归因 ↔ 向外归因 |
| 价值确认路径 | 根系深浅 | 自我逻辑 ↔ 他人理解 |
| 边界形态 | 容器边缘 | 模糊流动 ↔ 清晰稳定 |
| 欲望可见度 | 窗帘透光 | 隐藏 ↔ 清晰可见 |
| 情绪处理路径 | 水流状态 | 延后蓄积 ↔ 即时行动 |
| 责任分布 | 负重大小 | 共担 ↔ 独自承担 |
| 抵抗方式 | 障碍形态 | 回避 ↔ 内在抽离 |

### 2. **AI 生成像素画**
基于用户的8个维度组合，自动生成一幅独特的像素风格画作，作为其内在世界的视觉化呈现。

## 🎨 像素画生成规则

系统会根据维度组合映射为视觉元素：

### 核心意象
- **主体感低 + 边界模糊** → 雾中灯塔
- **主体感高 + 边界清晰** → 湖边小屋
- **边界模糊** → 云中浮岛

### 天气/光线
- **情绪延后 + 欲望隐藏** → 薄雾星光
- **情绪即时 + 欲望可见** → 彩虹阳光
- **欲望可见** → 温暖落日

### 环境元素
- **内归因 + 高责任** → 背重担的小人
- **外归因 + 低责任** → 随风旗帜

## 📂 文件结构

```
src/
├── journey/types.ts              # 新增 Dimension 类型
├── llm/
│   ├── pixelArtGenerator.ts     # 像素画生成逻辑
│   ├── mockData.ts              # 新增 dimensions mock 数据
│   └── imageClient.ts           # 智谱 API 调用（已有）
├── components/
│   ├── DimensionsVisualization.vue  # 维度可视化组件
│   └── PixelArtSection.vue          # 像素画展示组件
└── views/
    └── ReportView.vue           # 集成新功能

```

## 🚀 如何测试

### 方式1: 使用测试路由（推荐）
访问 `http://localhost:5173/report-test` 查看完整效果，包含：
- 8个维度的可视化展示
- "生成我的像素画"按钮
- 点击后调用智谱API生成

### 方式2: 修改 Mock 数据
编辑 `src/llm/mockData.ts` 中的 `dimensions` 数组，调整各维度的 value（0-100），查看不同组合的视觉效果。

示例：
```typescript
{
  id: "boundary",
  name: "边界形态",
  value: 75,  // 修改这里：0（模糊）→ 100（清晰）
  // ...
}
```

## 🎯 维度值含义

每个维度的 value 范围：
- **0-35**: 低倾向（如：边界模糊、欲望隐藏）
- **35-65**: 中等（平衡状态）
- **65-100**: 高倾向（如：边界清晰、欲望可见）

## 🖼️ 像素画生成流程

1. 用户点击"生成我的像素画"
2. 系统读取8个维度数据
3. 应用规则生成提示词（如："雾中灯塔，薄雾笼罩，月光照亮..."）
4. 调用智谱 CogView API
5. 返回像素风可爱图像
6. 展示在报告页面中

## ⚙️ 自定义规则

编辑 `src/llm/pixelArtGenerator.ts` 中的 `generatePixelArtPrompt()` 函数，可以：
- 添加新的维度组合规则
- 修改视觉元素映射
- 调整提示词模板

## 🔧 API 配置

确保 `.env.local` 中配置了智谱 API：
```
VITE_ZHIPU_API_KEY=your-key
VITE_ZHIPU_API_BASE=https://open.bigmodel.cn/api/paas/v4
VITE_ZHIPU_IMAGE_MODEL=cogview-4-plus
```

## 💡 未来扩展

- [ ] 支持用户手动调整维度值
- [ ] 导出维度报告为 PDF
- [ ] 维度变化动画
- [ ] 多种艺术风格选择（不只是像素风）
- [ ] 社交分享功能
